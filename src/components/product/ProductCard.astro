---
import { formatPrice } from '@lib/utils';
import FavoriteButton from '@components/islands/FavoriteButton';

interface Props {
  product: {
    id: string;
    name: string;
    slug: string;
    price: number;
    images: string[];
    stock: number;
  };
}

const { product } = Astro.props;
const mainImage = product.images[0] || '/placeholder.jpg';
---

<a 
  href={`/productos/${product.slug}`}
  class="group block relative"
>
  <div class="aspect-[3/4] overflow-hidden bg-gray-100 relative">
    <img 
      src={mainImage} 
      alt={product.name}
      class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"
      loading="lazy"
    />
    
    {/* Badges (Example logic) */}
    {product.stock > 0 && (
       <div class="absolute bottom-2 left-2 bg-black text-white text-xs font-bold px-2 py-1 uppercase tracking-wider">
         New In
       </div>
    )}
    
    {/* Favorite Icon */}
    <FavoriteButton client:load productId={product.id} />
  </div>
  
  <div class="pt-3">
    <h3 class="text-sm font-normal text-gray-600 mb-1 leading-tight group-hover:text-black transition-colors">
      {product.name}
    </h3>
    <div class="flex items-center space-x-2">
      <p class="text-sm font-bold text-black">
        {formatPrice(product.price)}
      </p>
      {/* Optional: Logic for old price if on sale */}
    </div>
    
    {/* Color options placeholder (dots) if needed, based on image */}
    <div class="flex items-center gap-1 mt-2 text-xs text-gray-400">
      <span>+1 Color</span>
    </div>
  </div>
</a>
